# Endpoints

Base URL for all HTTPS endpoints:

`/api/`

## Requests

## API Authentication keys

### Authentication headers

All requests must includes these headers to authenticate (excluding explicit headers specifications)

| Name       | Format    | Description                                                |
| ---------- | --------- | ---------------------------------------------------------- |
| Username   | Username  | The username as it was registered in the database          |
| Session ID | sessionid | A session id key generated by the [login endpoint](#login) |

### Login

> **GET** /login

| Name      | Format    | Description                                                                                   | Usages                     |
| --------- | --------- | --------------------------------------------------------------------------------------------- | -------------------------- |
| Username  | Username  | The username as it was registered in the database                                             | Always                     |
| API Token | api-token | A Token generated by the API with O-Auth (**recommended**)                                    | 2FA is enabled or disabled |
| Password  | Password  | Clear password that will be challenged with stored digest ([argon2](https://www.argon2.com/)) | 2FA is disabled            |

This method returns a Set-Cookies header within a session id valid for 1 hour.

```bash
Set-Cookies: sessionid=:session_id
```

### Register

> **POST** /register

This methods needs the following headers

| Name     | Format   | Description                                                                 |
| -------- | -------- | --------------------------------------------------------------------------- |
| Username | Username | The user identifier that will be stored on the server                       |
| Password | Password | The user password that will be digest and stored (the digest) on the server |

### Vaults

> **GET** /vault

List the name of all the vaults owned by the user.

> **GET** /vault/:vault_name

Get the BLOB data stored in the vault.

> **POST** /vault

Including [auth headers](#authentication-headers), this method needs the following headers

| Name       | Format     | Description          |
| ---------- | ---------- | -------------------- |
| Vault name | vault-name | The vault identifier |

In addition to that, the client needs to send AES encrypted BLOB data that contains passwords.

> **UPDATE** /vault/:vault_name

This method needs the client sends an AES encrypted BLOB with the new vault.
