# Endpoints

Base URL for all HTTPS endpoints:

`/api/`

## Requests

## API Authentication keys

### Authentication headers

All requests must includes these headers to authenticate (excluding explicit headers specifications)

| Name       | Format     | Description                                                |
| ---------- | ---------- | ---------------------------------------------------------- |
| Username   | Username   | The username as it was registered in the database          |
| Session ID | Session-Id | A session id key generated by the [login endpoint](#login) |

### Login

> **GET** /login

| Name      | Format       | Description                                                                                   | Usages                     |
| --------- | ------------ | --------------------------------------------------------------------------------------------- | -------------------------- |
| Username  | Username     | The username as it was registered in the database                                             | Always                     |
| API Token | X-Auth-Token | A Token generated by the API with O-Auth (**recommended**)                                    | 2FA is enabled or disabled |
| Password  | Password     | Clear password that will be challenged with stored digest ([argon2](https://www.argon2.com/)) | 2FA is disabled            |

This method returns a Set-Cookies header within a session id valid for 1 hour.

```bash
Set-Cookies: Session-Id=:session_id
```

### Register

> **POST** /register

This methods needs the following headers

| Name     | Format   | Description                                                                 |
| -------- | -------- | --------------------------------------------------------------------------- |
| Username | Username | The user identifier that will be stored on the server                       |
| Password | Password | The user password that will be digest and stored (the digest) on the server |

### Auth Token

> **GET** /user/token

Get a list of token with their name (id), the token value, the creation date, and the last usage, each value separated by a new line. Each token is separated by two new lines.

---

> **POST** /user/token

Generate a new token.

Headers :

| Name       | Format     | Description                                    |
| ---------- | ---------- | ---------------------------------------------- |
| Vault name | Vault-Name | The name of the new vault that will be created |

---

> **DELETE** /user/token/:token_id

Delete the specified token.

### Vaults

> **GET** /vault

List the name of all the vaults owned by the user and their creation date.

---

> **POST** /vault

Create a new vault with BLOBs sent in request body.

Including [auth headers](#authentication-headers), this method needs the following headers

| Name       | Format     | Description          |
| ---------- | ---------- | -------------------- |
| Vault name | Vault-Name | The vault identifier |

In addition to that, the request needs a body containing BLOBs.

---

> **PATCH** /vault/:vault_name

Update the BLOBs inside the vault.

The request needs a body containing BLOBs.

---

> **DELETE** /vault/:vault_name

Delete the vault from the database.
